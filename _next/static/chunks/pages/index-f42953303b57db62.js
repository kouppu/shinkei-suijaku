(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(n,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(5343)}])},5343:function(n,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var e=r(5893),i=r(2014),a=r(7294),c=r(7882),u=r(1752);function o(n){return(0,u.default)().publicRuntimeConfig.urlPrefix+n}var s=function(n){return(0,e.jsx)(c.Z,{children:(0,e.jsx)("img",{onClick:function(){return n.handleCardItemClick(n.card)},src:n.card.isFornt?o("/cards/".concat(n.card.type,"/").concat(n.card.number,".png")):o("/cards/back.png"),alt:"Card",loading:"lazy"})},"".concat(n.card.type).concat(n.card.number))},f=r(5450);function d(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var h=function(){function n(t,r){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(d(this,n),n.MIN_NUMBER>r||n.MAX_NUMBER<r)throw"Number is invalid.";this.type=t,this.number=r,this.isFornt=e}var t=n.prototype;return t.equal=function(n){return this.number==n.number&&this.type==n.type},t.equalNumber=function(n){return this.number==n.number},t.faceUp=function(){return new n(this.type,this.number,!0)},t.faceDown=function(){return new n(this.type,this.number,!1)},n}();h.MIN_NUMBER=1,h.MAX_NUMBER=13;var l=function(){function n(t){if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.MAX_CARD_LENGTH=52,this.MAX_CARD_LENGTH<t.length)throw"The max number of cards has been exceeded.";this.cards=t}var t=n.prototype;return t.add=function(t){return new n(this.cards.concat(t))},t.remove=function(t){var r=this.cards.indexOf(t);return-1!=r&&new n(this.cards.filter((function(n,t){return t!=r})))},t.shuffle=function(){return new n(this.shuffleArray(this.cards))},t.faceUpCard=function(t){var r=this.findIndexOfCard(t);if(-1==r)throw"Not find card in cards";return this.cards[r]=t.faceUp(),new n(this.cards)},t.faceDownCard=function(t){var r=this.findIndexOfCard(t);if(-1==r)throw"Not find card in cards";return this.cards[r]=t.faceDown(),new n(this.cards)},t.findIndexOfCard=function(n){var t=-1;return this.cards.forEach((function(r,e){r.equal(n)&&(t=e)})),t},t.shuffleArray=function(n){for(var t=n.length-1;t>0;t-=1){var r=Math.floor(Math.random()*(t+1)),e=n[t];n[t]=n[r],n[r]=e}return n},n}(),v=Object.values({FIRST:"first",SECOND:"second"});var w=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.move=t}var t=n.prototype;return t.next=function(){var t=v.indexOf(this.move),r=v[t+1];return new n(void 0==r?"first":r)},t.isCurrentMove=function(n){return this.move==n},n}(),m=Object.values({SPADE:"spade",HEART:"heart",DIAMOND:"diamond",CLUB:"club"}),p=function(){var n=(0,a.useState)(new w("first")),t=n[0],r=n[1],i=(0,a.useState)(new l([])),c=i[0],u=i[1],o=(0,a.useState)(),d=o[0],v=o[1],p=(0,a.useState)(!1),C=p[0],b=p[1];(0,a.useEffect)((function(){u(M())}),[]);var y=function(n){if(!C)switch(t.move){case"first":x(n);break;case"second":N(n);break;default:throw"Undefined move"}},x=function(n){C||t.isCurrentMove("first")&&(n.isFornt||(v(n),_(n),r(t.next())))},N=function(n){C||t.isCurrentMove("second")&&(n.isFornt||d&&(d.equal(n)||(_(n),b(!0),setTimeout((function(){d.equalNumber(n)||(E(d),E(n)),r(t.next()),b(!1)}),1e3))))},_=function(n){u(c.faceUpCard(n))},E=function(n){u(c.faceDownCard(n))},M=function(){var n=new l([]),t=!0,r=!1,e=void 0;try{for(var i,a=m[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)for(var c=i.value,u=1;u<=h.MAX_NUMBER;u++){var o=new h(c,u,!1);n=n.add(o)}}catch(s){r=!0,e=s}finally{try{t||null==a.return||a.return()}finally{if(r)throw e}}return n.shuffle()};return(0,e.jsx)(f.Z,{sx:{width:1200},cols:13,children:c.cards.map((function(n){return(0,e.jsx)(s,{card:n,handleCardItemClick:y},"".concat(n.type,"-").concat(n.number))}))})},C=function(){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("main",{children:(0,e.jsx)(i.Z,{children:(0,e.jsx)(p,{})})})})}}},function(n){n.O(0,[684,774,888,179],(function(){return t=8312,n(n.s=t);var t}));var t=n.O();_N_E=t}]);