(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(n,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(6985)}])},6985:function(n,r,t){"use strict";t.r(r),t.d(r,{default:function(){return k}});var e=t(5893),i=t(7948),a=t(2293),c=t(155),o=t(8862),s=t(8140),u=function(){return(0,e.jsx)(a.Z,{position:"static",children:(0,e.jsx)(i.Z,{maxWidth:"xl",children:(0,e.jsxs)(c.Z,{disableGutters:!0,children:[(0,e.jsx)(s.Z,{sx:{display:{xs:"none",md:"flex"},mr:1}}),(0,e.jsx)(o.Z,{variant:"h6",noWrap:!0,component:"a",href:"/",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:"\u795e\u7d4c\u8870\u5f31"})]})})})},f=t(7294),d=t(6242),h=t(4267);function l(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}var m=function(){function n(r,t){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(l(this,n),n.MIN_NUMBER>t||n.MAX_NUMBER<t)throw"Number is invalid.";this.type=r,this.number=t,this.isFront=e}var r=n.prototype;return r.equal=function(n){return this.number==n.number&&this.type==n.type},r.equalNumber=function(n){return this.number==n.number},r.faceUp=function(){return new n(this.type,this.number,!0)},r.faceDown=function(){return new n(this.type,this.number,!1)},n}();m.MIN_NUMBER=1,m.MAX_NUMBER=13;var v=function(){function n(r){if(function(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}(this,n),this.MAX_CARD_LENGTH=52,this.MAX_CARD_LENGTH<r.length)throw"The max number of cards has been exceeded.";this.cards=r}var r=n.prototype;return r.add=function(r){return new n(this.cards.concat(r))},r.remove=function(r){var t=this.cards.indexOf(r);return-1!=t&&new n(this.cards.filter((function(n,r){return r!=t})))},r.shuffle=function(){return new n(this.shuffleArray(this.cards))},r.faceUpCard=function(r){var t=this.findIndexOfCard(r);if(-1==t)throw"Not find card in cards";return this.cards[t]=r.faceUp(),new n(this.cards)},r.faceDownCard=function(r){var t=this.findIndexOfCard(r);if(-1==t)throw"Not find card in cards";return this.cards[t]=r.faceDown(),new n(this.cards)},r.findIndexOfCard=function(n){var r=-1;return this.cards.forEach((function(t,e){t.equal(n)&&(r=e)})),r},r.shuffleArray=function(n){for(var r=n.length-1;r>0;r-=1){var t=Math.floor(Math.random()*(r+1)),e=n[r];n[r]=n[t],n[t]=e}return n},n}(),x=Object.values({FIRST:"first",SECOND:"second"});var p=function(){function n(r){!function(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}(this,n),this.move=r}var r=n.prototype;return r.next=function(){var r=x.indexOf(this.move),t=x[r+1];return new n(void 0==t?"first":t)},r.isCurrentMove=function(n){return this.move==n},n}(),w=Object.values({SPADE:"spade",HEART:"heart",DIAMOND:"diamond",CLUB:"club"}),C=t(9007),b=t(1752);function y(n){return(0,b.default)().publicRuntimeConfig.urlPrefix+n}var j=function(n){return(0,e.jsx)(C.Z,{children:(0,e.jsx)("img",{onClick:function(){return n.handleCardItemClick(n.card)},src:n.card.isFront?y("/cards/".concat(n.card.type,"/").concat(n.card.number,".png")):y("/cards/back.png"),alt:"Card",loading:"lazy"})},"".concat(n.card.type).concat(n.card.number))},N=t(5450),_=function(n){return(0,e.jsx)(N.Z,{cols:13,children:n.deck.cards.map((function(r){return(0,e.jsx)(j,{card:r,handleCardItemClick:n.handleCardItemClick},"".concat(r.type,"-").concat(r.number))}))})},E=t(3486),M=function(){var n=(0,f.useState)(new p("first")),r=n[0],t=n[1],i=(0,f.useState)(new v([])),a=i[0],c=i[1],o=(0,f.useState)(),s=o[0],u=o[1],l=(0,f.useState)(!1),x=l[0],C=l[1];(0,f.useEffect)((function(){c(M())}),[]);var b=function(n){x||r.isCurrentMove("first")&&(n.isFront||(u(n),j(n),t(r.next())))},y=function(n){x||r.isCurrentMove("second")&&(n.isFront||s&&(s.equal(n)||(j(n),C(!0),setTimeout((function(){s.equalNumber(n)||(N(s),N(n)),t(r.next()),C(!1)}),1e3))))},j=function(n){c(a.faceUpCard(n))},N=function(n){c(a.faceDownCard(n))},M=function(){var n=new v([]),r=!0,t=!1,e=void 0;try{for(var i,a=w[Symbol.iterator]();!(r=(i=a.next()).done);r=!0)for(var c=i.value,o=1;o<=m.MAX_NUMBER;o++){var s=new m(c,o,!1);n=n.add(s)}}catch(u){t=!0,e=u}finally{try{r||null==a.return||a.return()}finally{if(t)throw e}}return n.shuffle()};return(0,e.jsx)(d.Z,{sx:{background:E.Z[900],mt:5},children:(0,e.jsx)(h.Z,{children:(0,e.jsx)(_,{deck:a,handleCardItemClick:function(n){if(!x)switch(r.move){case"first":b(n);break;case"second":y(n);break;default:throw"Undefined move"}}})})})},k=function(){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("header",{children:(0,e.jsx)(u,{})}),(0,e.jsx)("main",{children:(0,e.jsx)(i.Z,{children:(0,e.jsx)("section",{children:(0,e.jsx)(M,{})})})})]})}}},function(n){n.O(0,[374,774,888,179],(function(){return r=8312,n(n.s=r);var r}));var r=n.O();_N_E=r}]);