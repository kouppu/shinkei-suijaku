(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(n,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(4075)}])},4075:function(n,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _}});var e=r(5893),i=r(7948),a=r(7294),c=r(9007),o=r(1752);function s(n){return(0,o.default)().publicRuntimeConfig.urlPrefix+n}var u=function(n){return(0,e.jsx)(c.Z,{children:(0,e.jsx)("img",{onClick:function(){return n.handleCardItemClick(n.card)},src:n.card.isFront?s("/cards/".concat(n.card.type,"/").concat(n.card.number,".png")):s("/cards/back.png"),alt:"Card",loading:"lazy"})},"".concat(n.card.type).concat(n.card.number))},f=r(5450);function d(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var h=function(){function n(t,r){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(d(this,n),n.MIN_NUMBER>r||n.MAX_NUMBER<r)throw"Number is invalid.";this.type=t,this.number=r,this.isFront=e}var t=n.prototype;return t.equal=function(n){return this.number==n.number&&this.type==n.type},t.equalNumber=function(n){return this.number==n.number},t.faceUp=function(){return new n(this.type,this.number,!0)},t.faceDown=function(){return new n(this.type,this.number,!1)},n}();h.MIN_NUMBER=1,h.MAX_NUMBER=13;var l=function(){function n(t){if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.MAX_CARD_LENGTH=52,this.MAX_CARD_LENGTH<t.length)throw"The max number of cards has been exceeded.";this.cards=t}var t=n.prototype;return t.add=function(t){return new n(this.cards.concat(t))},t.remove=function(t){var r=this.cards.indexOf(t);return-1!=r&&new n(this.cards.filter((function(n,t){return t!=r})))},t.shuffle=function(){return new n(this.shuffleArray(this.cards))},t.faceUpCard=function(t){var r=this.findIndexOfCard(t);if(-1==r)throw"Not find card in cards";return this.cards[r]=t.faceUp(),new n(this.cards)},t.faceDownCard=function(t){var r=this.findIndexOfCard(t);if(-1==r)throw"Not find card in cards";return this.cards[r]=t.faceDown(),new n(this.cards)},t.findIndexOfCard=function(n){var t=-1;return this.cards.forEach((function(r,e){r.equal(n)&&(t=e)})),t},t.shuffleArray=function(n){for(var t=n.length-1;t>0;t-=1){var r=Math.floor(Math.random()*(t+1)),e=n[t];n[t]=n[r],n[r]=e}return n},n}(),m=Object.values({FIRST:"first",SECOND:"second"});var v=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.move=t}var t=n.prototype;return t.next=function(){var t=m.indexOf(this.move),r=m[t+1];return new n(void 0==r?"first":r)},t.isCurrentMove=function(n){return this.move==n},n}(),p=Object.values({SPADE:"spade",HEART:"heart",DIAMOND:"diamond",CLUB:"club"}),x=function(){var n=(0,a.useState)(new v("first")),t=n[0],r=n[1],i=(0,a.useState)(new l([])),c=i[0],o=i[1],s=(0,a.useState)(),d=s[0],m=s[1],x=(0,a.useState)(!1),w=x[0],b=x[1];(0,a.useEffect)((function(){o(M())}),[]);var C=function(n){if(!w)switch(t.move){case"first":y(n);break;case"second":N(n);break;default:throw"Undefined move"}},y=function(n){w||t.isCurrentMove("first")&&(n.isFront||(m(n),_(n),r(t.next())))},N=function(n){w||t.isCurrentMove("second")&&(n.isFront||d&&(d.equal(n)||(_(n),b(!0),setTimeout((function(){d.equalNumber(n)||(E(d),E(n)),r(t.next()),b(!1)}),1e3))))},_=function(n){o(c.faceUpCard(n))},E=function(n){o(c.faceDownCard(n))},M=function(){var n=new l([]),t=!0,r=!1,e=void 0;try{for(var i,a=p[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)for(var c=i.value,o=1;o<=h.MAX_NUMBER;o++){var s=new h(c,o,!1);n=n.add(s)}}catch(u){r=!0,e=u}finally{try{t||null==a.return||a.return()}finally{if(r)throw e}}return n.shuffle()};return(0,e.jsx)(f.Z,{sx:{width:1200},cols:13,children:c.cards.map((function(n){return(0,e.jsx)(u,{card:n,handleCardItemClick:C},"".concat(n.type,"-").concat(n.number))}))})},w=r(5295),b=r(155),C=r(8862),y=r(8140),N=function(){return(0,e.jsx)(w.Z,{position:"static",children:(0,e.jsx)(i.Z,{maxWidth:"xl",children:(0,e.jsxs)(b.Z,{disableGutters:!0,children:[(0,e.jsx)(y.Z,{sx:{display:{xs:"none",md:"flex"},mr:1}}),(0,e.jsx)(C.Z,{variant:"h6",noWrap:!0,component:"a",href:"/",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:"\u795e\u7d4c\u8870\u5f31"})]})})})},_=function(){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("header",{children:(0,e.jsx)(N,{})}),(0,e.jsx)("main",{children:(0,e.jsx)(i.Z,{children:(0,e.jsx)(x,{})})})]})}}},function(n){n.O(0,[412,774,888,179],(function(){return t=8312,n(n.s=t);var t}));var t=n.O();_N_E=t}]);