(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(n,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(7348)}])},7348:function(n,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var e=r(5893),a=r(2014),i=r(7294),c=r(7882),o=function(n){return(0,e.jsx)(c.Z,{children:(0,e.jsx)("img",{onClick:function(){return n.handleCardItemClick(n.card)},src:n.card.isFornt?"/cards/".concat(n.card.type,"/").concat(n.card.number,".png"):"/cards/back.png",alt:"Card",loading:"lazy"})},"".concat(n.card.type).concat(n.card.number))},u=r(5450);function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var f=function(){function n(t,r){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(s(this,n),n.MIN_NUMBER>r||n.MAX_NUMBER<r)throw"Number is invalid.";this.type=t,this.number=r,this.isFornt=e}var t=n.prototype;return t.equal=function(n){return this.number==n.number&&this.type==n.type},t.equalNumber=function(n){return this.number==n.number},t.faceUp=function(){return new n(this.type,this.number,!0)},t.faceDown=function(){return new n(this.type,this.number,!1)},n}();f.MIN_NUMBER=1,f.MAX_NUMBER=13;var d=function(){function n(t){if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.MAX_CARD_LENGTH=52,this.MAX_CARD_LENGTH<t.length)throw"The max number of cards has been exceeded.";this.cards=t}var t=n.prototype;return t.add=function(t){return new n(this.cards.concat(t))},t.remove=function(t){var r=this.cards.indexOf(t);return-1!=r&&new n(this.cards.filter((function(n,t){return t!=r})))},t.shuffle=function(){return new n(this.shuffleArray(this.cards))},t.faceUpCard=function(t){var r=this.findIndexOfCard(t);if(-1==r)throw"Not find card in cards";return this.cards[r]=t.faceUp(),new n(this.cards)},t.faceDownCard=function(t){var r=this.findIndexOfCard(t);if(-1==r)throw"Not find card in cards";return this.cards[r]=t.faceDown(),new n(this.cards)},t.findIndexOfCard=function(n){var t=-1;return this.cards.forEach((function(r,e){r.equal(n)&&(t=e)})),t},t.shuffleArray=function(n){for(var t=n.length-1;t>0;t-=1){var r=Math.floor(Math.random()*(t+1)),e=n[t];n[t]=n[r],n[r]=e}return n},n}(),h=Object.values({FIRST:"first",SECOND:"second"});var l=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.move=t}var t=n.prototype;return t.next=function(){var t=h.indexOf(this.move),r=h[t+1];return new n(void 0==r?"first":r)},t.isCurrentMove=function(n){return this.move==n},n}(),v=Object.values({SPADE:"spade",HEART:"heart",DIAMOND:"diamond",CLUB:"club"}),w=function(){var n=(0,i.useState)(new l("first")),t=n[0],r=n[1],a=(0,i.useState)(new d([])),c=a[0],s=a[1],h=(0,i.useState)(),w=h[0],m=h[1],p=(0,i.useState)(!1),C=p[0],b=p[1];(0,i.useEffect)((function(){s(M())}),[]);var y=function(n){if(!C)switch(t.move){case"first":N(n);break;case"second":_(n);break;default:throw"Undefined move"}},N=function(n){C||t.isCurrentMove("first")&&(n.isFornt||(m(n),x(n),r(t.next())))},_=function(n){C||t.isCurrentMove("second")&&(n.isFornt||w&&(w.equal(n)||(x(n),b(!0),setTimeout((function(){w.equalNumber(n)||(E(w),E(n)),r(t.next()),b(!1)}),1e3))))},x=function(n){s(c.faceUpCard(n))},E=function(n){s(c.faceDownCard(n))},M=function(){var n=new d([]),t=!0,r=!1,e=void 0;try{for(var a,i=v[Symbol.iterator]();!(t=(a=i.next()).done);t=!0)for(var c=a.value,o=1;o<=f.MAX_NUMBER;o++){var u=new f(c,o,!1);n=n.add(u)}}catch(s){r=!0,e=s}finally{try{t||null==i.return||i.return()}finally{if(r)throw e}}return n.shuffle()};return(0,e.jsx)(u.Z,{sx:{width:1200},cols:13,children:c.cards.map((function(n){return(0,e.jsx)(o,{card:n,handleCardItemClick:y},"".concat(n.type,"-").concat(n.number))}))})},m=function(){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("main",{children:(0,e.jsx)(a.Z,{children:(0,e.jsx)(w,{})})})})}}},function(n){n.O(0,[759,774,888,179],(function(){return t=8312,n(n.s=t);var t}));var t=n.O();_N_E=t}]);